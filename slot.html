<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

    >child-component< {{message}} >/child-component< <br>
    부모 데이터에 바인딩됨 <br>

    <div id="app1">
        <component v-bind:is="currentView"></component>
    </div>
    
    <!-- 2 -->
    자식 컴포넌트 참조
    <div id="parent">
        <user-profile ref="profile"></user-profile>
    </div>

    <!-- -------------------------------------------------------------------- -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <script>

        var Home = {
            template: '<p>Welcome home!</p>'
        }

        var vm = new Vue({
            el: '#app1'
            ,data:{
                currentView: Home
            },
            components:{
                home: {}
                ,posts: {}
                ,archive: {}
            }
        });

        //2
        /*
        Vue.component('user-profile',{
            template:'<p> template </p>'
        });
        var parent = new Vue({el: '#parent'});
        console.log(parent);
        var child = parent.$refs.profile;
        console.log(child);
        */

        //3
        Vue.component('user-profile', function(resolve, reject){
            setTimeout(function(){
                //컴포넌트 정의를 resolve 콜백에 전달
                resolve({template : '<div>I am async!</div>'});
            },1000);
        });

        //4
        Vue.component('async-webpack-example', function(resolve){
            require(['./my-async-component'], resolve);
        })

        //5 ==4
        Vue.component('async-webpack-example', () => import('./my-async-component'))

        //6 ==5
        new Vue({
            //.. 
            components:{
                'my-component' : () => import('./my-async-component')
            }
        });

        //비동기식을 지원하기 위해 webpack 사용을 권장함

        //고급 비동기 컴포넌트
        const AsyncComp = () => ({
            component: import('.Mycomp.vue'), //로드하는 컴포넌트 (promise여야함)
            loading: LoadingComp,   //비동기 컴포넌트가 로드되는 동안 사용할 컴포넌트
            error: ErrorComp,       //실패했을 경우 사용하는 컴포넌트
            delay: 200,             //로딩 컴포넌트를 보여주기전에 지연하는 정도. 기본200
            timeout: 3000           //시간이 초과되면 에로용 컴포넌트가 표시. 기본:Infinity
        });

        new Vue({el: '#parent'});

        //v-once
        /*
        정적인 여러개의 컴포넌트가 필요할때는 v-once 디렉티브를 루트 엘리먼트에 추가함으로써
        캐시가 한번만 실행될 수 있도록 한다.
        
        */


    </script>

</body>
</html>